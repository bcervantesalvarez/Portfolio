{
  "hash": "b886e49d2cf78613333b6b5785a58bfe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Automaker Analysis\"\nauthor: \"Brian Cervantes Alvarez\"\ndate: \"10-31-2023\"\ndescription: \"Diving deep into the complex world of market competition for automakers.\"\nformat:\n  html:\n    toc: true\n    toc-location: right\n    html-math-method: katex\n    page-layout: article\n    code-fold: false\nexecute: \n  warning: false\n  message: false\ncategories: [R, Time Series, Data Visualization]\npage-layout: article\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(DataExplorer)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nds <- read_csv(\"automakers.csv\")\n\nglimpse(ds)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 11,121\nColumns: 12\n$ city_mpg        <dbl> 13, 20, 19, 20, 18, 26, 27, 25, 26, 20, 21, 21, 17, 16…\n$ class           <chr> \"standard sport utility vehicle\", \"small sport utility…\n$ combination_mpg <dbl> 15, 23, 21, 22, 21, 29, 29, 27, 29, 22, 24, 24, 19, 18…\n$ cylinders       <dbl> 8, 4, 6, 4, 6, 4, 4, 4, 4, 4, 4, 4, 6, 6, 4, 4, 6, 6, …\n$ displacement    <dbl> 5.7, 2.7, 3.5, 2.7, 3.5, 1.8, 1.8, 1.8, 1.8, 2.4, 2.4,…\n$ drive           <chr> \"4wd\", \"fwd\", \"fwd\", \"awd\", \"awd\", \"fwd\", \"fwd\", \"fwd\"…\n$ fuel_type       <chr> \"gas\", \"gas\", \"gas\", \"gas\", \"gas\", \"gas\", \"gas\", \"gas\"…\n$ highway_mpg     <dbl> 18, 26, 26, 26, 25, 33, 33, 31, 32, 26, 28, 28, 21, 21…\n$ make            <chr> \"toyota\", \"toyota\", \"toyota\", \"toyota\", \"toyota\", \"toy…\n$ model           <chr> \"land cruiser wagon 4wd\", \"venza\", \"venza\", \"venza awd…\n$ transmission    <chr> \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"m\", \"a\", \"m\", \"a\", \"m\",…\n$ year            <dbl> 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, …\n```\n\n\n:::\n\n```{.r .cell-code}\nds <- ds %>% \n  mutate(class = factor(class),\n         drive = factor(drive),\n         fuel_type = factor(fuel_type),\n         make = factor(make),\n         model = factor(model),\n         transmission = factor(transmission))\n\nglimpse(ds)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 11,121\nColumns: 12\n$ city_mpg        <dbl> 13, 20, 19, 20, 18, 26, 27, 25, 26, 20, 21, 21, 17, 16…\n$ class           <fct> standard sport utility vehicle, small sport utility ve…\n$ combination_mpg <dbl> 15, 23, 21, 22, 21, 29, 29, 27, 29, 22, 24, 24, 19, 18…\n$ cylinders       <dbl> 8, 4, 6, 4, 6, 4, 4, 4, 4, 4, 4, 4, 6, 6, 4, 4, 6, 6, …\n$ displacement    <dbl> 5.7, 2.7, 3.5, 2.7, 3.5, 1.8, 1.8, 1.8, 1.8, 2.4, 2.4,…\n$ drive           <fct> 4wd, fwd, fwd, awd, awd, fwd, fwd, fwd, fwd, awd, fwd,…\n$ fuel_type       <fct> gas, gas, gas, gas, gas, gas, gas, gas, gas, gas, gas,…\n$ highway_mpg     <dbl> 18, 26, 26, 26, 25, 33, 33, 31, 32, 26, 28, 28, 21, 21…\n$ make            <fct> toyota, toyota, toyota, toyota, toyota, toyota, toyota…\n$ model           <fct> \"land cruiser wagon 4wd\", \"venza\", \"venza\", \"venza awd…\n$ transmission    <fct> a, a, a, a, a, a, m, a, m, a, m, a, a, m, a, m, a, m, …\n$ year            <dbl> 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, …\n```\n\n\n:::\n\n```{.r .cell-code}\nnames(ds)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"city_mpg\"        \"class\"           \"combination_mpg\" \"cylinders\"      \n [5] \"displacement\"    \"drive\"           \"fuel_type\"       \"highway_mpg\"    \n [9] \"make\"            \"model\"           \"transmission\"    \"year\"           \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n# Read the CSV file\nds <- read_csv(\"automakers.csv\")\n```\n:::\n\n\n## Data Wrangling\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Convert class column into 2 different columns\nds <- ds %>%\n  mutate(\n    class_size = case_when(\n      grepl(\"standard|minivan\", class) ~ \"Standard\",\n      grepl(\"small|two seater\", class) ~ \"Small\",\n      grepl(\"compact|subcompact|minicompact\", class) ~ \"Compact\",\n      grepl(\"midsize\", class) ~ \"Midsize\",\n      grepl(\"large|van\", class) ~ \"Large\",\n      TRUE ~ \"Commercial\"\n    ),\n    class_type = case_when(\n      grepl(\"sport utility vehicle\", class) ~ \"SUV\",\n      grepl(\"station wagon\", class) ~ \"Station Wagon\",\n      grepl(\"pickup truck\", class) ~ \"Pickup Truck\",\n      grepl(\"car\", class) & !grepl(\"minivan\", class) ~ \"Car\",\n      grepl(\"van\", class) & !grepl(\"minivan\", class) ~ \"Van\",\n      grepl(\"two seater\", class) ~ \"Sports Car\",\n      grepl(\"minivan\", class) ~ \"Minivan\",\n      TRUE ~ \"Commercial\"\n    )\n  )\n# Define the custom order for class_size\nclass_size_order <- c(\"Compact\", \"Small\", \"Midsize\", \"Standard\", \"Large\", \"Commercial\")\n\n# Update the class_size column with the custom order\nds$class_size <- factor(ds$class_size, levels = class_size_order)\n\n\nds <- ds %>%\n  mutate(\n    make = ifelse(str_detect(make, \"^[a-zA-Z]{1,2}$\"), str_to_upper(make), str_to_title(make)),\n    model = str_to_title(model))\n\n\nds <- ds %>% \n  mutate(class_type = factor(class_type),\n         drive = factor(drive),\n         fuel_type = factor(fuel_type),\n         make = factor(make),\n         model = factor(model),\n         transmission = factor(transmission)) %>%\n  select(-class)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Split dataset \"ds\" into electric, diesel \nelectricDs <- ds %>%\n  filter(fuel_type %in% \"electricity\") %>%\n  select(-c(fuel_type,\n            cylinders,\n            displacement))\n\ndieselDs <- ds %>%\n  filter(fuel_type %in% \"diesel\") %>%\n  select(-fuel_type)\n\ngasDs <- ds %>%\n  filter(fuel_type %in% \"gas\") %>%\n  select(-fuel_type)\n```\n:::\n\n\n## Check for missing values\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmissing_electric <- colSums(is.na(electricDs))\nmissing_diesel <- colSums(is.na(dieselDs))\nmissing_gas <- colSums(is.na(gasDs))\n\n#print(missing_diesel)\n#print(missing_electric)\n#print(missing_gas)\n```\n:::\n\n\n## Data Visualizations\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Assuming your data frame is named 'gasDs'\ngasDs %>%\n  group_by(year, class_type) %>%\n  summarise(total_num = n()) %>%\n  ungroup() %>%\n  ggplot(aes(x = year, y = total_num, color = class_type)) +\n  geom_line(alpha = 0.9) +\n  scale_x_continuous(breaks = seq(min(gasDs$year), max(gasDs$year), by = 1)) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}