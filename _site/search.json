[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Portfolio",
    "section": "",
    "text": "U.S. Medical Insurance Costs\n\n\n\n\n\n\n\n\n\n\n \n\n\n\n\n  \n\n\n\n\nWelcome To My Blog\n\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\n\n\nFeb 5, 2023\n\n\nTristan O’Malley\n\n\n\n\n\n\n  \n\n\n\n\nU.S. Medical Insurance Costs\n\n\n\n\n\n\n\npython\n\n\nhealthcare\n\n\nanalysis\n\n\nstats\n\n\n\n\n\n\n\n\n\n\n\nJul 14, 2022\n\n\nBrian Cervantes Alvarez\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "This is a post with executable code.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is the first post in a Quarto blog. Welcome!\n\nSince this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About Me",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "posts/post-with-code/US_Medical_Insurance_Costs.html",
    "href": "posts/post-with-code/US_Medical_Insurance_Costs.html",
    "title": "Brian Cervantes Alvarez",
    "section": "",
    "text": "This is a portolifo project for the medical industry to demonstrate the ability to provide visualizations and statistical inferences when given a cleaned up data set. In this case, I am looking into the U.S. Medical Insurance Costs sample data set that was provided by Codecademy’s Data Scientist: Inference Specialist Path: https://www.kaggle.com/datasets/mirichoi0218/insurance\nHere are a few questions I formulated before diving into the data set: What single component causes the most increase in insurance costs? What variables play a role in increasing or decreasing insurance costs? What would be the ideal individual to minimize the cost of medical insurance?\nI immediately identified smoker as being a key variable to analyze their individual costs. Plus, I dive into the difference of between male and female insurance costs for both smokers and nonsmokers.\nIf you wish to skip towards the results portion, feel free to scroll down and have a quick read! Interesting results were found.\n\n\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nfrom scipy import stats\n\n#read in the csv file\ndf = pd.read_csv('insurance.csv')\nprint(df.head())\n\n   age     sex     bmi  children smoker     region      charges\n0   19  female  27.900         0    yes  southwest  16884.92400\n1   18    male  33.770         1     no  southeast   1725.55230\n2   28    male  33.000         3     no  southeast   4449.46200\n3   33    male  22.705         0     no  northwest  21984.47061\n4   32    male  28.880         0     no  northwest   3866.85520\n\n\n\n\n\n\nWe want to know what influences the cost of insurance. What causes an individual to pay more for their insurance? We can infer that being a smoker will drastically increase their out of pocket medical insurance expenses.\nI take a look into how many smokers we have in this data set. Then, I take a quick look into the smokers’ distribution of charges and show a boxplot to visualize the insurance cost quartiles. Next, I dive into using some statistics such as finding the min, max, mean, median, etc. I follow up by seperating male and female smokers and seeing if there’s a drastic change in their expenses.\n\n\n\nSmoker Count: 274\nNonsmoker Count: 1064\n\n\n#while a histogram is not necessary, it can really show in the visual count of smokers vs nonsmokers\nplt.figure(figsize = (8, 6))\nsns.histplot(df.smoker)\nplt.title('Smoker vs Nonsmoker Count')\nplt.savefig('smoker_vs_nonsmoker_count.png')\nplt.show()\nplt.clf()\n\n#num_smokers = df.smoker.value_counts()['yes']\n#num_nonsmokers = df.smoker.value_counts()['no']\n#print(\"Exact number of smokers: {num_smokers}\".format(num_smokers = num_smokers))\n#print(\"Exact number of nonsmokers: {num_nonsmokers}\".format(num_nonsmokers = num_nonsmokers))\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\n\nThe interquartile range is $20,125.33. Very high spread from the first and third interquartiles.\nNow, notice that we have a bimodal distribution. This means that there is a variable in the data set that is drastically affecting the insurance cost. Since there is two “humps” we must identify the component that causes a further jump in insurance costs for those who smoke.\nWhat could cause this? - Region? - Bmi? - Sex? - Children? - Age?\n\ndf_smokers = df[df.smoker == 'yes']\n#print(df_smokers.head())\n\nIQR = stats.iqr(df_smokers.charges, interpolation = 'midpoint')\n#print(round(IQR,2))\n\nfig, (ax1, ax2) = plt.subplots(1,2,figsize=(20,10))\n#boxplot\nsns.boxplot(y = df_smokers.charges, ax = ax1)\nax1.set_ylabel('Insurance cost (USD)')\nax1.set_title('Insurance Cost Boxplot for Smokers')\n\n#histogram\nsns.histplot(df_smokers.charges, bins = 40, ax = ax2)\nax2.set_xlabel('Insurance Cost (USD)')\nax2.set_title('Insurance Cost Distribution for Smokers')\n\nplt.savefig('smoker_charges_boxplot_histogram.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\n\nSummary Stats: - Mean: $32,050.23 - Median: $34,456.35 - Max: $63,770.43 - Min: $12,829.46 - Standard Deviation: $11,520.47 - Variance: 132721153.14\nGiven the distribution, we can say that the mean represents the true average insurance cost for smokers.\n\n#find mean of insurance cost for smokers\nsmoker_mean = round(np.mean(df_smokers.charges), 2)\nprint('The average insurance cost for being a smoker: ${mean}'.format(mean = smoker_mean))\n#find median of insurance cost for smokers\nsmoker_median = round(np.median(df_smokers.charges), 2)\nprint('The median insurance cost for being a smoker: ${median}'.format(median = smoker_median))\n#find standard deviation...\nsmoker_std = round(np.std(df_smokers.charges),2)\nprint('The standard deviation is: ${std}'.format(std = smoker_std))\n#let's see the variance\nsmoker_var = round(np.var(df_smokers.charges),2)\nprint('The variance is: {var}'.format(var = smoker_var))\n#maximum cost\nsmoker_max = round(np.max(df_smokers.charges), 2)\nprint('The maximum insurance cost for being a smoker is: ${max}'.format(max = smoker_max))\n#minimum cost\nsmoker_min = round(np.min(df_smokers.charges), 2)\nprint('The minimum insurance cost for being a smoker is: ${min}'.format(min = smoker_min))\n\nThe average insurance cost for being a smoker: $32050.23\nThe median insurance cost for being a smoker: $34456.35\nThe standard deviation is: $11520.47\nThe variance is: 132721153.14\nThe maximum insurance cost for being a smoker is: $63770.43\nThe minimum insurance cost for being a smoker is: $12829.46\n\n\n\n\n\nI chose to seperate male and female smokers to see if there was a noticable difference in cost. Notice in the graphs below, that we can easily identify the culprit for the bimodal distribution. The BMI drastically influences the insurance cost when it is greater than or equal to 30 (the obese rating starts at 30 forward). This means that being obese AND being a smoker can sharply increase your medical insurance cost.\nNote: As Age slowly increases, the insurance cost also slowly increases. So, there is a gradual increase in insurance cost as you age. That is common sense since as one ages, one develops more health issues as they near death.\n\n\n\nGraph One: Cost Distribution - Bimodal Distribution is again present. - Two clusters of cost are due to an underlying variable.\nGraph Two: Barplot of Average Cost per Child - No clear trend. - Only valuable note is that having 4 children seems to have an overall lower average insurance cost.\nGraph Three: Scatterplot of Cost vs BMI with Region - There is a visable linear relationship between BMI and Cost. - There are two clusters of individuals but follows the linear relationship. - At >=30 BMI, there is a clear signifcant increase in insurance cost for male smokers. - Note: a BMI of 30 or implies that the individual is “obese” (though, BMI is not necessarily a good measurement–see results). - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - There is a linear trend, but split into two linear clusters. - As found earlier, this is most likely due to BMI differences in the indivduals. - Overtime, an individual’s insurance cost will increase as expected.\nGraph Five: Barplot of Average Cost per Region - No valuable insights can be drawn.\nGraph Six: Boxplot of Male Smoker Insurance Cost - Noteworthy to see the spread of male smokers’ insurance cost.\n\n#seperate all male smokers from the main data set\ndf_male_smoker = df_smokers[df_smokers.sex == 'male']\n\n#print(df_male_smoker.head())\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 3)\n\n#histogram male smoker\nsns.histplot(df_male_smoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Male Smoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of male smokers per child\ndf_children = df_male_smoker.groupby('children').mean().reset_index()\n#print(df_children.head())\n\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Male Smoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of male smokers by BMI\nsns.scatterplot(x = df_male_smoker.bmi, y = df_male_smoker.charges,\n                hue = df_male_smoker.region,\n                size = df_male_smoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Male Smoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of male smokers by age\nsns.scatterplot(x = df_male_smoker.age, y = df_male_smoker.charges,\n                hue = df_male_smoker.children,\n                size = df_male_smoker.children, sizes = (125,250),\n                ax = ax[1,0])\nax[1,0].set_title('Male Smoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of male smokers per region\ndf_region = df_male_smoker.groupby('region').mean().reset_index()\n#print(df_region.head())\n\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average Male Smoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of male smoker boxplot\nsns.boxplot(x = df_male_smoker.charges, ax = ax[1,2])\nax[1,2].set_title('Male Smoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\nplt.savefig('male_smoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\n\nAs mentioned above, the reason why the cost distribution had two clusters was due to the difference in BMI in each male smoker. Male smokers with a BMI >= 30 will that their expense increase by approximately 47%.\n\n#highlight BMI graph\nplt.figure(figsize = (10, 5))\nsns.scatterplot(x = df_male_smoker.bmi, y = df_male_smoker.charges,\n                hue = df_male_smoker.region,\n                size = df_male_smoker.region,\n                sizes = (75, 250))\nplt.axvline(x = 30, color = 'gray', label = 'Obese BMI')\nplt.title('Male Smoker Insurance Cost vs BMI')\nplt.xlabel('BMI')\nplt.ylabel('Insurance Costs (USD)')\nplt.legend(bbox_to_anchor = (1.0, 1))\n\n<matplotlib.legend.Legend at 0x7fc2f6434670>\n\n\n\n\n\n\n#analyze BMI < 30\n\nmale_df_bmi = df_male_smoker[df_male_smoker.bmi < 30]\nmale_avg_cost = round(np.mean(male_df_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for male smokers with a BMI of less than 30 equates to: ${charge}\".format(charge = male_avg_cost))\n\n#analyze BMI >= 30\n\nmale_df2_bmi = df_male_smoker[df_male_smoker.bmi >= 30]\nmale_avg_cost_2 = round(np.mean(male_df2_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for male smokers with a BMI of greater than or equal to 30 equates to: ${charge}\".format(charge = male_avg_cost_2))\n\n#Difference of Insurance Cost\nmale_diff_cost = male_avg_cost_2 - male_avg_cost\nprint(\"The difference in insurance cost from being at or over 30 BMI compared to being under 30 BMI for males is: ${diff}\".format(diff = male_diff_cost))\n\nmale_diff_cost_percent = 100*round(male_diff_cost / male_avg_cost_2, 2)\nprint('A male smoker will suffer an increase of {percent}% in their insurance cost by being obese (BMI >= 30)'.format(percent = male_diff_cost_percent))\n\n\n\n\nThe average insurance cost for male smokers with a BMI of less than 30 equates to: $21643.07\nThe average insurance cost for male smokers with a BMI of greater than or equal to 30 equates to: $41131.57\nThe difference in insurance cost from being at or over 30 BMI compared to being under 30 BMI for males is: $19488.5\nA male smoker will suffer an increase of 47.0% in their insurance cost by being obese (BMI >= 30)\n\n\n\n\n\nGraph One: Cost Distribution - Bimodal Distribution is again present. - Two clusters of cost are due to an underlying variable.\nGraph Two: Barplot of Average Cost per Child - No clear trend. - Only valuable note is that having 5 children seems to have an overall lower average insurance cost.\nGraph Three: Scatterplot of Cost vs BMI with Region - There is a visable linear relationship between BMI and Cost - There are two clusters of individuals but follows the linear relationship. - At >=30 BMI, there is a clear signifcant increase in insurance cost for female smokers. - Note: a BMI of 30 or implies that the individual is “obese” (though, BMI is not necessarily a good measurement–see results). - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - There is a linear trend, but split into two linear clusters. - As found earlier, this is most likely due to BMI differences in the indivduals. - Overtime, an individual’s insurance cost will increase as expected.\nGraph Five: Barplot of Average Cost per Region - No valuable insights can be drawn.\nGraph Six: Boxplot of Female Smoker Insurance Cost - Noteworthy to see the spread of female smokers’ insurance cost.\nGiven that the Insurane Cost vs BMI is essentially the same as male smokers, the stated results will apply here.\n\n#seperate all female smokers from the main data set\ndf_female_smoker = df_smokers[df_smokers.sex == 'female']\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#histogram male smoker\nsns.histplot(df_female_smoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Female Smoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of female smokers per child\ndf_children = df_female_smoker.groupby('children').mean().reset_index()\n#print(df_children.head())\n\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Female Smoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of female smokers by BMI\nsns.scatterplot(x = df_female_smoker.bmi, y = df_female_smoker.charges,\n                hue = df_female_smoker.region,\n                size = df_female_smoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Female Smoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of female smokers by age\nsns.scatterplot(x = df_female_smoker.age, y = df_female_smoker.charges,\n                hue = df_female_smoker.children,\n                size = df_female_smoker.children,\n                sizes = (125, 250), ax = ax[1,0])\nax[1,0].set_title('Female Smoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of female smokers per region\ndf_region = df_female_smoker.groupby('region').mean().reset_index()\n#print(df_region.head())\n\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average. Female Smoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of female smoker age vs bmi\nsns.boxplot(x = df_female_smoker.charges, ax = ax[1,2])\nax[1,2].set_title('Female Smoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\n\nplt.savefig('female_smoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n#analyze BMI < 30\n\nfemale_df_bmi = df_female_smoker[df_female_smoker.bmi < 30]\nfemale_avg_cost = round(np.mean(female_df_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for female smokers with a BMI of less than 30 equates to: ${charge}\".format(charge = female_avg_cost))\n\n#analyze BMI >= 30\n\nfemale_df2_bmi = df_female_smoker[df_female_smoker.bmi >= 30]\nfemale_avg_cost_2 = round(np.mean(female_df2_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for female smokers with a BMI of greater than or equal to 30 equates to: ${charge}\".format(charge = female_avg_cost_2))\n\n#Difference of Insurance Cost\nfemale_diff_cost = female_avg_cost_2 - female_avg_cost\nprint(\"The difference in cost from being at or over 30 BMI compared to being under 30 BMI for females is: ${diff}\".format(diff = female_diff_cost))\n\nThe average insurance cost for female smokers with a BMI of less than 30 equates to: $21070.04\nThe average insurance cost for female smokers with a BMI of greater than or equal to 30 equates to: $42320.62\nThe difference in cost from being at or over 30 BMI compared to being under 30 BMI for females is: $21250.58\n\n\n\n\n\nNoteworthy mention: - Male smokers pay approximately 1.34% more than their female counterparts when their BMI less than 30. - Male smokers pay approximately 1.42% less than their female counterparts when their BMI greater than or equal to 30.\n\n#Plot average insurance cost for male and female \ndf_bmi_less_than_30 = df_smokers[df_smokers.bmi < 30]\ndf_one = df_bmi_less_than_30.groupby('sex').mean().reset_index()\n\n#Get value\nmale_bmi_less_than_30 = df_one[df_one.sex == 'male'].charges.sum()\nfemale_bmi_less_than_30 = df_one[df_one.sex == 'female'].charges.sum()\n#print value\n\nmale_female_sum = male_bmi_less_than_30 + female_bmi_less_than_30\npor_male_less_30 = male_bmi_less_than_30 / male_female_sum\npor_female_less_30 = female_bmi_less_than_30 / male_female_sum\n\n\ndiff_por = round((por_male_less_30 - por_female_less_30), 4) * 100\nprint(\"Male smokers are expected to pay approximately {diff_por}% more than their female counterparts when their BMI < 30 \".format(diff_por = diff_por))\n\ndf_bmi_greater_than_or_equal_30 = df_smokers[df_smokers.bmi >= 30]\ndf_two = df_bmi_greater_than_or_equal_30.groupby('sex').mean().reset_index()\n\nmale_bmi_greq_30 = df_two[df_two.sex == 'male'].charges.sum()\nfemale_bmi_greq_30 = df_two[df_two.sex == 'female'].charges.sum()\n\n\nmale_female_sum = male_bmi_greq_30 + female_bmi_greq_30\npor_male_greq_30 = male_bmi_greq_30 / male_female_sum\npor_female_greq_30 = female_bmi_greq_30 / male_female_sum\n\ndiff_por_greq = round((por_male_greq_30 - por_female_greq_30), 4) * 100\ndiff_por_greq = abs(round(diff_por_greq, 4))\nprint(\"Male smokers are expected to pay approximately {diff_por_greq}% less than their female counterparts when their BMI >= 30\".format(diff_por_greq = diff_por_greq))\n\n#print(df_one)\n#print(df_two)\n#df3 = pd.concat([df_one, df_two])\n#print(df3)\n\nfig, ax = plt.subplots(1,2,figsize=(25,10))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#BMI is less than 30\nsns.set_palette('bright')\nsns.barplot(x = df_one.sex, y = df_one.charges, ax = ax[0])\nax[0].set_xlabel('Sex')\nax[0].set_ylabel('Insurance Cost (USD)')\nax[0].set_title('Average Smoker Insurance Cost with BMI < 30')\n\n\n#BMI is greater than or equal to 30\nsns.set_palette('dark')\nsns.barplot(x = df_two.sex, y = df_two.charges, ax = ax[1])\nax[1].set_xlabel('Sex')\nax[1].set_ylabel('Insurance Cost (USD)')\nax[1].set_title('Average Smoker Insurance Cost with BMI >= 30')\n\nplt.savefig('avg_insurance_cost_per_sex')\nplt.show()\nplt.clf\n\n\nMale smokers are expected to pay approximately 1.34% more than their female counterparts when their BMI < 30 \nMale smokers are expected to pay approximately 1.42% less than their female counterparts when their BMI >= 30\n\n\n\n\n\n<function matplotlib.pyplot.clf()>\n\n\n\n\n\nThe interquartile range is $7,378.07. Spread is minimal from the first and third interquartiles.\nNow, notice that we have a right-skewed distribution.\nWhat could cause this? - Region? - Bmi? - Sex? - Children? - Age?\nKeep in mind, there is a chance that we may not be able to determine the cause of those outliers.\n\nIQR = stats.iqr(df_nonsmokers.charges, interpolation = 'midpoint')\nIQR = round(IQR, 2)\nprint(IQR)\n\n\nfig, (ax1, ax2) = plt.subplots(1,2,figsize=(20,10))\n#boxplot\nsns.boxplot(y = df_nonsmokers.charges, ax = ax1)\nax1.set_ylabel('Insurance cost (USD)')\nax1.set_title('Insurance Cost Boxplot for Nonsmokers')\n\n#histogram\nsns.histplot(df_nonsmokers.charges, bins = 40, ax = ax2)\nax2.set_xlabel('Insurance Cost (USD)')\nax2.set_title('Insurance Cost Distribution for Nonsmokers')\n\nplt.savefig('nonsmoker_charges_boxplot_histogram.png')\nplt.show()\nplt.clf()\n#right skewed distribution...explain potential causes:  Male and Female? BMI?\n\n7378.07\n\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\n\n\nNow let’s look at the nonsmokers.\nSummary Stats: - Mean: $8,434.27 - Median: $7,345.41 - Max: $39,910.61 - Min: $1,121.87 - Standard Deviation: $5,990.96 - Variance: 35891656\n\ndf_nonsmokers = df[df.smoker == 'no']\n#print(df_nonsmokers.head())\n\n#find mean of insurance cost for nonsmokers\nnonsmoker_mean = round(np.mean(df_nonsmokers.charges), 2)\nprint('The nonsmoker average insurance cost for being a smoker: ${mean}'.format(mean = nonsmoker_mean))\n#find median of insurance cost for nonsmokers\nnonsmoker_median = round(np.median(df_nonsmokers.charges), 2)\nprint('The nonsmoker median insurance cost for being a smoker: ${median}'.format(median = nonsmoker_median))\n#find standard deviation...\nnonsmoker_std = round(np.std(df_nonsmokers.charges),2)\nprint('The nonsmoker standard deviation is: ${std}'.format(std = nonsmoker_std))\n#let's see the variance\nnonsmoker_var = round(np.var(df_nonsmokers.charges),2)\nprint('The nonsmoker variance is: {var}'.format(var = nonsmoker_var))\n#maximum cost\nnonsmoker_max = round(np.max(df_nonsmokers.charges), 2)\nprint('The nonsmoker maximum insurance cost is: ${max}'.format(max = nonsmoker_max))\n#minimum cost\nnonsmoker_min = round(np.min(df_nonsmokers.charges), 2)\nprint('The nonsmoker minimum insurance cost is: ${min}'.format(min = nonsmoker_min))\n\n#For explaination a high standard deviation tells us that here are other reasons the cost is so high since it varies signifcantly\n\nThe nonsmoker average insurance cost for being a smoker: $8434.27\nThe nonsmoker median insurance cost for being a smoker: $7345.41\nThe nonsmoker standard deviation is: $5990.96\nThe nonsmoker variance is: 35891656.0\nThe nonsmoker maximum insurance cost is: $36910.61\nThe nonsmoker minimum insurance cost is: $1121.87\n\n\n\n\nGraph One: Cost Distribution - Right-skewed distribution is again present. - Knowing this, we should go with the median as the most appropriate statistic instead of the mean.\nGraph Two: Barplot of Average Cost per Child - There seems to be a trend that having more children will lead to higher average insurance costs. - Given the information from the smokers, when an individual has 5 children or more, their insurance costs drops signifcantly. - However, the lowest average comes from having no children at all.\nGraph Three: Scatterplot of Cost vs BMI with Region - There is no correlation between cost and BMI of nonsmokers. - This is an interesting finding. - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - Strong linear relationship between insurance cost and age. - A secondary trend is shown with the number of children. - The less children, the insurance cost is on the lower end of the linear relationship. - The more children, the insurance cost is on the higher end of the linear relationship - The outliers do not follow the trend line.\nGraph Five: Barplot of Average Cost per Region - No valuable insights can be drawn. - Some regions are simply cheaper than others.\nGraph Six: Boxplot of Male Smoker Insurance Cost - Noteworthy to see the spread of male smokers’ insurance cost.\n\n#seperate all male nonsmokers from the main data set\ndf_male_nonsmoker = df_nonsmokers[df_nonsmokers.sex == 'male']\n\n#print(male_nonsmoker.head())\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#histogram male nonsmoker\nsns.histplot(df_male_nonsmoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Male Nonsmoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of male nonsmokers per child\ndf_children = df_male_nonsmoker.groupby('children').mean().reset_index()\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Male Nonsmoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of male nonsmokers by BMI\nsns.scatterplot(x = df_male_nonsmoker.bmi, y = df_male_nonsmoker.charges,\n                hue = df_male_nonsmoker.region,\n                size = df_male_nonsmoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Male Nonsmoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of male nonsmokers by age\nsns.scatterplot(x = df_male_nonsmoker.age, y = df_male_nonsmoker.charges,\n                hue = df_male_nonsmoker.children,\n                size = df_male_nonsmoker.children, sizes = (125,250),\n                ax = ax[1,0])\nax[1,0].set_title('Male Nonsmoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of male nonsmokers per region\ndf_region = df_male_nonsmoker.groupby('region').mean().reset_index()\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average Male Nonsmoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of male nonsmoker boxplot\nsns.boxplot(x = df_male_nonsmoker.charges, ax = ax[1,2])\nax[1,2].set_title('Male Nonsmoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\nplt.savefig('male_nonsmoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n#highlight scatter plot for linear trend\nplt.figure(figsize = (15, 10))\nsns.scatterplot(x = df_male_nonsmoker.age, y = df_male_nonsmoker.charges,\n                hue = df_male_nonsmoker.children,\n                size = df_male_nonsmoker.children,\n                sizes = (75, 200))\nplt.title('Male Nonsmoker Insurance Cost vs Age')\nplt.xlabel('Age')\nplt.ylabel('Insurance Costs (USD)')\nplt.savefig('male_nonsmoker_insurance_cost_vs_age.png')\nplt.show()\nplt.clf()\n#highlight this\n#solid evidence that as age increases, your insurance cost increases as well.\n#people with more children see a slightly higher cost overall \n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\n\nGraph One: Cost Distribution - Right-skewed distribution is again present. - Knowing this, we should go with the median as the most appropriate statistic instead of the mean.\nGraph Two: Barplot of Average Cost per Child - Similar to the male nonsmokers, there seems to be a trend that having more children will result in higher average insurance costs. - Given the information from the smokers, when an individual has 5 children or more, their insurance costs drops on average. - However, the lowest average comes from having no children at all.\nGraph Three: Scatterplot of Cost vs BMI with Region - Again, there is no correlation between cost and BMI of nonsmokers. - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - Strong linear relationship between insurance cost and age. - A secondary trend is shown with the number of children. - The less children, the insurance cost is on the lower end of the linear relationship. - The more children, the insurance cost is on the higher end of the linear relationship - The outliers do not follow the trend line.\nGraph Five: Barplot of Average Cost per Region - There is a slight trend of region importance. - The northeast is more expensive on average than the southwest.\nGraph Six: Boxplot of Male Smoker Insurance Cost - Noteworthy to see the spread of male smokers’ insurance cost.\n\n#seperate all female nonsmokers from the main data set\ndf_female_nonsmoker = df_nonsmokers[df_nonsmokers.sex == 'female']\n\n#print(df_female_nonsmoker.head())\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#histogram Female nonsmoker\nsns.histplot(df_female_nonsmoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Female Nonsmoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of Female nonsmokers per child\ndf_children = df_female_nonsmoker.groupby('children').mean().reset_index()\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Female Nonsmoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of Female nonsmokers by BMI\nsns.scatterplot(x = df_female_nonsmoker.bmi, y = df_female_nonsmoker.charges,\n                hue = df_female_nonsmoker.region,\n                size = df_female_nonsmoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Female Nonsmoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of Female nonsmokers by age\nsns.scatterplot(x = df_female_nonsmoker.age, y = df_female_nonsmoker.charges,\n                hue = df_female_nonsmoker.children,\n                size = df_female_nonsmoker.children, sizes = (125,250),\n                ax = ax[1,0])\nax[1,0].set_title('Female Nonsmoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of Female nonsmokers per region\ndf_region = df_female_nonsmoker.groupby('region').mean().reset_index()\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average Female Nonsmoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of Female nonsmoker boxplot\nsns.boxplot(x = df_male_nonsmoker.charges, ax = ax[1,2])\nax[1,2].set_title('Male Nonsmoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\nplt.savefig('female_nonsmoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>"
  },
  {
    "objectID": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html",
    "href": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html",
    "title": "Brian Cervantes Alvarez",
    "section": "",
    "text": "---\ntitle: \"U.S. Medical Insurance Costs\"\nauthor: \"Brian Cervantes Alvarez\"\ndate: \"2022-07-14\"\ncategories: [python, healthcare, analysis, stats]\nimage: \"health_ins.jepg\"\n---"
  },
  {
    "objectID": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html#purpose-of-this-project",
    "href": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html#purpose-of-this-project",
    "title": "Brian Cervantes Alvarez",
    "section": "Purpose of this Project",
    "text": "Purpose of this Project\nThis is a portolifo project for the medical industry to demonstrate the ability to provide visualizations and statistical inferences when given a cleaned up data set. In this case, I am looking into the U.S. Medical Insurance Costs sample data set that was provided by Codecademy’s Data Scientist: Inference Specialist Path: https://www.kaggle.com/datasets/mirichoi0218/insurance\nHere are a few questions I formulated before diving into the data set: What single component causes the most increase in insurance costs? What variables play a role in increasing or decreasing insurance costs? What would be the ideal individual to minimize the cost of medical insurance?\nI immediately identified smoker as being a key variable to analyze their individual costs. Plus, I dive into the difference of between male and female insurance costs for both smokers and nonsmokers.\nIf you wish to skip towards the results portion, feel free to scroll down and have a quick read! Interesting results were found.\n\nSet Up and Importing the Data\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nfrom scipy import stats\n\n#read in the csv file\ndf = pd.read_csv('insurance.csv')\nprint(df.head())\n\n   age     sex     bmi  children smoker     region      charges\n0   19  female  27.900         0    yes  southwest  16884.92400\n1   18    male  33.770         1     no  southeast   1725.55230\n2   28    male  33.000         3     no  southeast   4449.46200\n3   33    male  22.705         0     no  northwest  21984.47061\n4   32    male  28.880         0     no  northwest   3866.85520"
  },
  {
    "objectID": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html#analyzing-smoker-insurance-costs",
    "href": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html#analyzing-smoker-insurance-costs",
    "title": "Brian Cervantes Alvarez",
    "section": "Analyzing Smoker Insurance Costs",
    "text": "Analyzing Smoker Insurance Costs\nWe want to know what influences the cost of insurance. What causes an individual to pay more for their insurance? We can infer that being a smoker will drastically increase their out of pocket medical insurance expenses.\nI take a look into how many smokers we have in this data set. Then, I take a quick look into the smokers’ distribution of charges and show a boxplot to visualize the insurance cost quartiles. Next, I dive into using some statistics such as finding the min, max, mean, median, etc. I follow up by seperating male and female smokers and seeing if there’s a drastic change in their expenses.\n\nHistogram Plot of Smokers vs Nonsmokers\n\nSmoker Count: 274\nNonsmoker Count: 1064\n\n\n#while a histogram is not necessary, it can really show in the visual count of smokers vs nonsmokers\nplt.figure(figsize = (8, 6))\nsns.histplot(df.smoker)\nplt.title('Smoker vs Nonsmoker Count')\nplt.savefig('smoker_vs_nonsmoker_count.png')\nplt.show()\nplt.clf()\n\n#num_smokers = df.smoker.value_counts()['yes']\n#num_nonsmokers = df.smoker.value_counts()['no']\n#print(\"Exact number of smokers: {num_smokers}\".format(num_smokers = num_smokers))\n#print(\"Exact number of nonsmokers: {num_nonsmokers}\".format(num_nonsmokers = num_nonsmokers))\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\nBoxplot and Histogram Distribution of Insurance Costs for Smokers\nThe interquartile range is $20,125.33. Very high spread from the first and third interquartiles.\nNow, notice that we have a bimodal distribution. This means that there is a variable in the data set that is drastically affecting the insurance cost. Since there is two “humps” we must identify the component that causes a further jump in insurance costs for those who smoke.\nWhat could cause this? - Region? - Bmi? - Sex? - Children? - Age?\n\ndf_smokers = df[df.smoker == 'yes']\n#print(df_smokers.head())\n\nIQR = stats.iqr(df_smokers.charges, interpolation = 'midpoint')\n#print(round(IQR,2))\n\nfig, (ax1, ax2) = plt.subplots(1,2,figsize=(20,10))\n#boxplot\nsns.boxplot(y = df_smokers.charges, ax = ax1)\nax1.set_ylabel('Insurance cost (USD)')\nax1.set_title('Insurance Cost Boxplot for Smokers')\n\n#histogram\nsns.histplot(df_smokers.charges, bins = 40, ax = ax2)\nax2.set_xlabel('Insurance Cost (USD)')\nax2.set_title('Insurance Cost Distribution for Smokers')\n\nplt.savefig('smoker_charges_boxplot_histogram.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\nInsurance Cost Statistics for Smokers\nSummary Stats: - Mean: $32,050.23 - Median: $34,456.35 - Max: $63,770.43 - Min: $12,829.46 - Standard Deviation: $11,520.47 - Variance: 132721153.14\nGiven the distribution, we can say that the mean represents the true average insurance cost for smokers.\n\n#find mean of insurance cost for smokers\nsmoker_mean = round(np.mean(df_smokers.charges), 2)\nprint('The average insurance cost for being a smoker: ${mean}'.format(mean = smoker_mean))\n#find median of insurance cost for smokers\nsmoker_median = round(np.median(df_smokers.charges), 2)\nprint('The median insurance cost for being a smoker: ${median}'.format(median = smoker_median))\n#find standard deviation...\nsmoker_std = round(np.std(df_smokers.charges),2)\nprint('The standard deviation is: ${std}'.format(std = smoker_std))\n#let's see the variance\nsmoker_var = round(np.var(df_smokers.charges),2)\nprint('The variance is: {var}'.format(var = smoker_var))\n#maximum cost\nsmoker_max = round(np.max(df_smokers.charges), 2)\nprint('The maximum insurance cost for being a smoker is: ${max}'.format(max = smoker_max))\n#minimum cost\nsmoker_min = round(np.min(df_smokers.charges), 2)\nprint('The minimum insurance cost for being a smoker is: ${min}'.format(min = smoker_min))\n\nThe average insurance cost for being a smoker: $32050.23\nThe median insurance cost for being a smoker: $34456.35\nThe standard deviation is: $11520.47\nThe variance is: 132721153.14\nThe maximum insurance cost for being a smoker is: $63770.43\nThe minimum insurance cost for being a smoker is: $12829.46\n\n\n\n\nSeperating Male and Female Smokers\nI chose to seperate male and female smokers to see if there was a noticable difference in cost. Notice in the graphs below, that we can easily identify the culprit for the bimodal distribution. The BMI drastically influences the insurance cost when it is greater than or equal to 30 (the obese rating starts at 30 forward). This means that being obese AND being a smoker can sharply increase your medical insurance cost.\nNote: As Age slowly increases, the insurance cost also slowly increases. So, there is a gradual increase in insurance cost as you age. That is common sense since as one ages, one develops more health issues as they near death.\n\n\nAnalyzing Male Smokers\nGraph One: Cost Distribution - Bimodal Distribution is again present. - Two clusters of cost are due to an underlying variable.\nGraph Two: Barplot of Average Cost per Child - No clear trend. - Only valuable note is that having 4 children seems to have an overall lower average insurance cost.\nGraph Three: Scatterplot of Cost vs BMI with Region - There is a visable linear relationship between BMI and Cost. - There are two clusters of individuals but follows the linear relationship. - At >=30 BMI, there is a clear signifcant increase in insurance cost for male smokers. - Note: a BMI of 30 or implies that the individual is “obese” (though, BMI is not necessarily a good measurement–see results). - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - There is a linear trend, but split into two linear clusters. - As found earlier, this is most likely due to BMI differences in the indivduals. - Overtime, an individual’s insurance cost will increase as expected.\nGraph Five: Barplot of Average Cost per Region - No valuable insights can be drawn.\nGraph Six: Boxplot of Male Smoker Insurance Cost - Noteworthy to see the spread of male smokers’ insurance cost.\n\n#seperate all male smokers from the main data set\ndf_male_smoker = df_smokers[df_smokers.sex == 'male']\n\n#print(df_male_smoker.head())\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 3)\n\n#histogram male smoker\nsns.histplot(df_male_smoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Male Smoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of male smokers per child\ndf_children = df_male_smoker.groupby('children').mean().reset_index()\n#print(df_children.head())\n\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Male Smoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of male smokers by BMI\nsns.scatterplot(x = df_male_smoker.bmi, y = df_male_smoker.charges,\n                hue = df_male_smoker.region,\n                size = df_male_smoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Male Smoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of male smokers by age\nsns.scatterplot(x = df_male_smoker.age, y = df_male_smoker.charges,\n                hue = df_male_smoker.children,\n                size = df_male_smoker.children, sizes = (125,250),\n                ax = ax[1,0])\nax[1,0].set_title('Male Smoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of male smokers per region\ndf_region = df_male_smoker.groupby('region').mean().reset_index()\n#print(df_region.head())\n\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average Male Smoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of male smoker boxplot\nsns.boxplot(x = df_male_smoker.charges, ax = ax[1,2])\nax[1,2].set_title('Male Smoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\nplt.savefig('male_smoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\nBMI Graph Highlighted\nAs mentioned above, the reason why the cost distribution had two clusters was due to the difference in BMI in each male smoker. Male smokers with a BMI >= 30 will that their expense increase by approximately 47%.\n\n#highlight BMI graph\nplt.figure(figsize = (10, 5))\nsns.scatterplot(x = df_male_smoker.bmi, y = df_male_smoker.charges,\n                hue = df_male_smoker.region,\n                size = df_male_smoker.region,\n                sizes = (75, 250))\nplt.axvline(x = 30, color = 'gray', label = 'Obese BMI')\nplt.title('Male Smoker Insurance Cost vs BMI')\nplt.xlabel('BMI')\nplt.ylabel('Insurance Costs (USD)')\nplt.legend(bbox_to_anchor = (1.0, 1))\n\n<matplotlib.legend.Legend at 0x7fc2f6434670>\n\n\n\n\n\n\n#analyze BMI < 30\n\nmale_df_bmi = df_male_smoker[df_male_smoker.bmi < 30]\nmale_avg_cost = round(np.mean(male_df_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for male smokers with a BMI of less than 30 equates to: ${charge}\".format(charge = male_avg_cost))\n\n#analyze BMI >= 30\n\nmale_df2_bmi = df_male_smoker[df_male_smoker.bmi >= 30]\nmale_avg_cost_2 = round(np.mean(male_df2_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for male smokers with a BMI of greater than or equal to 30 equates to: ${charge}\".format(charge = male_avg_cost_2))\n\n#Difference of Insurance Cost\nmale_diff_cost = male_avg_cost_2 - male_avg_cost\nprint(\"The difference in insurance cost from being at or over 30 BMI compared to being under 30 BMI for males is: ${diff}\".format(diff = male_diff_cost))\n\nmale_diff_cost_percent = 100*round(male_diff_cost / male_avg_cost_2, 2)\nprint('A male smoker will suffer an increase of {percent}% in their insurance cost by being obese (BMI >= 30)'.format(percent = male_diff_cost_percent))\n\n\n\n\nThe average insurance cost for male smokers with a BMI of less than 30 equates to: $21643.07\nThe average insurance cost for male smokers with a BMI of greater than or equal to 30 equates to: $41131.57\nThe difference in insurance cost from being at or over 30 BMI compared to being under 30 BMI for males is: $19488.5\nA male smoker will suffer an increase of 47.0% in their insurance cost by being obese (BMI >= 30)\n\n\n\n\nAnalyzing Female Smokers\nGraph One: Cost Distribution - Bimodal Distribution is again present. - Two clusters of cost are due to an underlying variable.\nGraph Two: Barplot of Average Cost per Child - No clear trend. - Only valuable note is that having 5 children seems to have an overall lower average insurance cost.\nGraph Three: Scatterplot of Cost vs BMI with Region - There is a visable linear relationship between BMI and Cost - There are two clusters of individuals but follows the linear relationship. - At >=30 BMI, there is a clear signifcant increase in insurance cost for female smokers. - Note: a BMI of 30 or implies that the individual is “obese” (though, BMI is not necessarily a good measurement–see results). - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - There is a linear trend, but split into two linear clusters. - As found earlier, this is most likely due to BMI differences in the indivduals. - Overtime, an individual’s insurance cost will increase as expected.\nGraph Five: Barplot of Average Cost per Region - No valuable insights can be drawn.\nGraph Six: Boxplot of Female Smoker Insurance Cost - Noteworthy to see the spread of female smokers’ insurance cost.\nGiven that the Insurane Cost vs BMI is essentially the same as male smokers, the stated results will apply here.\n\n#seperate all female smokers from the main data set\ndf_female_smoker = df_smokers[df_smokers.sex == 'female']\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#histogram male smoker\nsns.histplot(df_female_smoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Female Smoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of female smokers per child\ndf_children = df_female_smoker.groupby('children').mean().reset_index()\n#print(df_children.head())\n\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Female Smoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of female smokers by BMI\nsns.scatterplot(x = df_female_smoker.bmi, y = df_female_smoker.charges,\n                hue = df_female_smoker.region,\n                size = df_female_smoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Female Smoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of female smokers by age\nsns.scatterplot(x = df_female_smoker.age, y = df_female_smoker.charges,\n                hue = df_female_smoker.children,\n                size = df_female_smoker.children,\n                sizes = (125, 250), ax = ax[1,0])\nax[1,0].set_title('Female Smoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of female smokers per region\ndf_region = df_female_smoker.groupby('region').mean().reset_index()\n#print(df_region.head())\n\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average. Female Smoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of female smoker age vs bmi\nsns.boxplot(x = df_female_smoker.charges, ax = ax[1,2])\nax[1,2].set_title('Female Smoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\n\nplt.savefig('female_smoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n#analyze BMI < 30\n\nfemale_df_bmi = df_female_smoker[df_female_smoker.bmi < 30]\nfemale_avg_cost = round(np.mean(female_df_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for female smokers with a BMI of less than 30 equates to: ${charge}\".format(charge = female_avg_cost))\n\n#analyze BMI >= 30\n\nfemale_df2_bmi = df_female_smoker[df_female_smoker.bmi >= 30]\nfemale_avg_cost_2 = round(np.mean(female_df2_bmi.charges, axis = 0),2)\nprint(\"The average insurance cost for female smokers with a BMI of greater than or equal to 30 equates to: ${charge}\".format(charge = female_avg_cost_2))\n\n#Difference of Insurance Cost\nfemale_diff_cost = female_avg_cost_2 - female_avg_cost\nprint(\"The difference in cost from being at or over 30 BMI compared to being under 30 BMI for females is: ${diff}\".format(diff = female_diff_cost))\n\nThe average insurance cost for female smokers with a BMI of less than 30 equates to: $21070.04\nThe average insurance cost for female smokers with a BMI of greater than or equal to 30 equates to: $42320.62\nThe difference in cost from being at or over 30 BMI compared to being under 30 BMI for females is: $21250.58\n\n\n\n\nAverage Insurance Cost Comparision of Male and Female Smokers\nNoteworthy mention: - Male smokers pay approximately 1.34% more than their female counterparts when their BMI less than 30. - Male smokers pay approximately 1.42% less than their female counterparts when their BMI greater than or equal to 30.\n\n#Plot average insurance cost for male and female \ndf_bmi_less_than_30 = df_smokers[df_smokers.bmi < 30]\ndf_one = df_bmi_less_than_30.groupby('sex').mean().reset_index()\n\n#Get value\nmale_bmi_less_than_30 = df_one[df_one.sex == 'male'].charges.sum()\nfemale_bmi_less_than_30 = df_one[df_one.sex == 'female'].charges.sum()\n#print value\n\nmale_female_sum = male_bmi_less_than_30 + female_bmi_less_than_30\npor_male_less_30 = male_bmi_less_than_30 / male_female_sum\npor_female_less_30 = female_bmi_less_than_30 / male_female_sum\n\n\ndiff_por = round((por_male_less_30 - por_female_less_30), 4) * 100\nprint(\"Male smokers are expected to pay approximately {diff_por}% more than their female counterparts when their BMI < 30 \".format(diff_por = diff_por))\n\ndf_bmi_greater_than_or_equal_30 = df_smokers[df_smokers.bmi >= 30]\ndf_two = df_bmi_greater_than_or_equal_30.groupby('sex').mean().reset_index()\n\nmale_bmi_greq_30 = df_two[df_two.sex == 'male'].charges.sum()\nfemale_bmi_greq_30 = df_two[df_two.sex == 'female'].charges.sum()\n\n\nmale_female_sum = male_bmi_greq_30 + female_bmi_greq_30\npor_male_greq_30 = male_bmi_greq_30 / male_female_sum\npor_female_greq_30 = female_bmi_greq_30 / male_female_sum\n\ndiff_por_greq = round((por_male_greq_30 - por_female_greq_30), 4) * 100\ndiff_por_greq = abs(round(diff_por_greq, 4))\nprint(\"Male smokers are expected to pay approximately {diff_por_greq}% less than their female counterparts when their BMI >= 30\".format(diff_por_greq = diff_por_greq))\n\n#print(df_one)\n#print(df_two)\n#df3 = pd.concat([df_one, df_two])\n#print(df3)\n\nfig, ax = plt.subplots(1,2,figsize=(25,10))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#BMI is less than 30\nsns.set_palette('bright')\nsns.barplot(x = df_one.sex, y = df_one.charges, ax = ax[0])\nax[0].set_xlabel('Sex')\nax[0].set_ylabel('Insurance Cost (USD)')\nax[0].set_title('Average Smoker Insurance Cost with BMI < 30')\n\n\n#BMI is greater than or equal to 30\nsns.set_palette('dark')\nsns.barplot(x = df_two.sex, y = df_two.charges, ax = ax[1])\nax[1].set_xlabel('Sex')\nax[1].set_ylabel('Insurance Cost (USD)')\nax[1].set_title('Average Smoker Insurance Cost with BMI >= 30')\n\nplt.savefig('avg_insurance_cost_per_sex')\nplt.show()\nplt.clf\n\n\nMale smokers are expected to pay approximately 1.34% more than their female counterparts when their BMI < 30 \nMale smokers are expected to pay approximately 1.42% less than their female counterparts when their BMI >= 30\n\n\n\n\n\n<function matplotlib.pyplot.clf()>\n\n\n\n\nBoxplot and Histogram Distribution of Insurance Costs for Nonsmokers\nThe interquartile range is $7,378.07. Spread is minimal from the first and third interquartiles.\nNow, notice that we have a right-skewed distribution.\nWhat could cause this? - Region? - Bmi? - Sex? - Children? - Age?\nKeep in mind, there is a chance that we may not be able to determine the cause of those outliers.\n\nIQR = stats.iqr(df_nonsmokers.charges, interpolation = 'midpoint')\nIQR = round(IQR, 2)\nprint(IQR)\n\n\nfig, (ax1, ax2) = plt.subplots(1,2,figsize=(20,10))\n#boxplot\nsns.boxplot(y = df_nonsmokers.charges, ax = ax1)\nax1.set_ylabel('Insurance cost (USD)')\nax1.set_title('Insurance Cost Boxplot for Nonsmokers')\n\n#histogram\nsns.histplot(df_nonsmokers.charges, bins = 40, ax = ax2)\nax2.set_xlabel('Insurance Cost (USD)')\nax2.set_title('Insurance Cost Distribution for Nonsmokers')\n\nplt.savefig('nonsmoker_charges_boxplot_histogram.png')\nplt.show()\nplt.clf()\n#right skewed distribution...explain potential causes:  Male and Female? BMI?\n\n7378.07\n\n\n\n\n\n<Figure size 432x288 with 0 Axes>"
  },
  {
    "objectID": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html#analyzing-the-insurance-cost-of-nonsmokers",
    "href": "posts/post-with-code/US_Medical_Insurance_Costs_v2.html#analyzing-the-insurance-cost-of-nonsmokers",
    "title": "Brian Cervantes Alvarez",
    "section": "Analyzing the insurance cost of nonsmokers",
    "text": "Analyzing the insurance cost of nonsmokers\nNow let’s look at the nonsmokers.\nSummary Stats: - Mean: $8,434.27 - Median: $7,345.41 - Max: $39,910.61 - Min: $1,121.87 - Standard Deviation: $5,990.96 - Variance: 35891656\n\ndf_nonsmokers = df[df.smoker == 'no']\n#print(df_nonsmokers.head())\n\n#find mean of insurance cost for nonsmokers\nnonsmoker_mean = round(np.mean(df_nonsmokers.charges), 2)\nprint('The nonsmoker average insurance cost for being a smoker: ${mean}'.format(mean = nonsmoker_mean))\n#find median of insurance cost for nonsmokers\nnonsmoker_median = round(np.median(df_nonsmokers.charges), 2)\nprint('The nonsmoker median insurance cost for being a smoker: ${median}'.format(median = nonsmoker_median))\n#find standard deviation...\nnonsmoker_std = round(np.std(df_nonsmokers.charges),2)\nprint('The nonsmoker standard deviation is: ${std}'.format(std = nonsmoker_std))\n#let's see the variance\nnonsmoker_var = round(np.var(df_nonsmokers.charges),2)\nprint('The nonsmoker variance is: {var}'.format(var = nonsmoker_var))\n#maximum cost\nnonsmoker_max = round(np.max(df_nonsmokers.charges), 2)\nprint('The nonsmoker maximum insurance cost is: ${max}'.format(max = nonsmoker_max))\n#minimum cost\nnonsmoker_min = round(np.min(df_nonsmokers.charges), 2)\nprint('The nonsmoker minimum insurance cost is: ${min}'.format(min = nonsmoker_min))\n\n#For explaination a high standard deviation tells us that here are other reasons the cost is so high since it varies signifcantly\n\nThe nonsmoker average insurance cost for being a smoker: $8434.27\nThe nonsmoker median insurance cost for being a smoker: $7345.41\nThe nonsmoker standard deviation is: $5990.96\nThe nonsmoker variance is: 35891656.0\nThe nonsmoker maximum insurance cost is: $36910.61\nThe nonsmoker minimum insurance cost is: $1121.87\n\n\n\nAnalyzing Male Nonsmokers\nGraph One: Cost Distribution - Right-skewed distribution is again present. - Knowing this, we should go with the median as the most appropriate statistic instead of the mean.\nGraph Two: Barplot of Average Cost per Child - There seems to be a trend that having more children will lead to higher average insurance costs. - Given the information from the smokers, when an individual has 5 children or more, their insurance costs drops signifcantly. - However, the lowest average comes from having no children at all.\nGraph Three: Scatterplot of Cost vs BMI with Region - There is no correlation between cost and BMI of nonsmokers. - This is an interesting finding. - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - Strong linear relationship between insurance cost and age. - A secondary trend is shown with the number of children. - The less children, the insurance cost is on the lower end of the linear relationship. - The more children, the insurance cost is on the higher end of the linear relationship - The outliers do not follow the trend line.\nGraph Five: Barplot of Average Cost per Region - No valuable insights can be drawn. - Some regions are simply cheaper than others.\nGraph Six: Boxplot of Male Smoker Insurance Cost - Noteworthy to see the spread of male smokers’ insurance cost.\n\n#seperate all male nonsmokers from the main data set\ndf_male_nonsmoker = df_nonsmokers[df_nonsmokers.sex == 'male']\n\n#print(male_nonsmoker.head())\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#histogram male nonsmoker\nsns.histplot(df_male_nonsmoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Male Nonsmoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of male nonsmokers per child\ndf_children = df_male_nonsmoker.groupby('children').mean().reset_index()\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Male Nonsmoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of male nonsmokers by BMI\nsns.scatterplot(x = df_male_nonsmoker.bmi, y = df_male_nonsmoker.charges,\n                hue = df_male_nonsmoker.region,\n                size = df_male_nonsmoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Male Nonsmoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of male nonsmokers by age\nsns.scatterplot(x = df_male_nonsmoker.age, y = df_male_nonsmoker.charges,\n                hue = df_male_nonsmoker.children,\n                size = df_male_nonsmoker.children, sizes = (125,250),\n                ax = ax[1,0])\nax[1,0].set_title('Male Nonsmoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of male nonsmokers per region\ndf_region = df_male_nonsmoker.groupby('region').mean().reset_index()\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average Male Nonsmoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of male nonsmoker boxplot\nsns.boxplot(x = df_male_nonsmoker.charges, ax = ax[1,2])\nax[1,2].set_title('Male Nonsmoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\nplt.savefig('male_nonsmoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n#highlight scatter plot for linear trend\nplt.figure(figsize = (15, 10))\nsns.scatterplot(x = df_male_nonsmoker.age, y = df_male_nonsmoker.charges,\n                hue = df_male_nonsmoker.children,\n                size = df_male_nonsmoker.children,\n                sizes = (75, 200))\nplt.title('Male Nonsmoker Insurance Cost vs Age')\nplt.xlabel('Age')\nplt.ylabel('Insurance Costs (USD)')\nplt.savefig('male_nonsmoker_insurance_cost_vs_age.png')\nplt.show()\nplt.clf()\n#highlight this\n#solid evidence that as age increases, your insurance cost increases as well.\n#people with more children see a slightly higher cost overall \n\n\n\n\n<Figure size 432x288 with 0 Axes>\n\n\n\n\nAnalyzing Female Nonsmokers\nGraph One: Cost Distribution - Right-skewed distribution is again present. - Knowing this, we should go with the median as the most appropriate statistic instead of the mean.\nGraph Two: Barplot of Average Cost per Child - Similar to the male nonsmokers, there seems to be a trend that having more children will result in higher average insurance costs. - Given the information from the smokers, when an individual has 5 children or more, their insurance costs drops on average. - However, the lowest average comes from having no children at all.\nGraph Three: Scatterplot of Cost vs BMI with Region - Again, there is no correlation between cost and BMI of nonsmokers. - No trends with the region.\nGraph Four: Scatterplot of Cost vs Age with Children - Strong linear relationship between insurance cost and age. - A secondary trend is shown with the number of children. - The less children, the insurance cost is on the lower end of the linear relationship. - The more children, the insurance cost is on the higher end of the linear relationship - The outliers do not follow the trend line.\nGraph Five: Barplot of Average Cost per Region - There is a slight trend of region importance. - The northeast is more expensive on average than the southwest.\nGraph Six: Boxplot of Male Smoker Insurance Cost - Noteworthy to see the spread of male smokers’ insurance cost.\n\n#seperate all female nonsmokers from the main data set\ndf_female_nonsmoker = df_nonsmokers[df_nonsmokers.sex == 'female']\n\n#print(df_female_nonsmoker.head())\n\nfig, ax = plt.subplots(2,3,figsize=(40,30))\nsns.set_style('darkgrid')\nsns.set(font_scale = 2)\n\n#histogram Female nonsmoker\nsns.histplot(df_female_nonsmoker.charges, bins = 40, ax = ax[0,0])\nax[0,0].set_title('Female Nonsmoker Insurance Cost Distribution')\nax[0,0].set_xlabel('Insurnance Cost (USD)')\n\n#barplot for insurance cost of Female nonsmokers per child\ndf_children = df_female_nonsmoker.groupby('children').mean().reset_index()\nsns.barplot(x = df_children.children, y = df_children.charges, ax = ax[0,1])\nax[0,1].set_title('Average Female Nonsmoker Insurance Cost Per Child')\nax[0,1].set_xlabel('Number of Children')\nax[0,1].set_ylabel('Insurance Cost (USD)')\n\n#scatterplot for insurance cost of Female nonsmokers by BMI\nsns.scatterplot(x = df_female_nonsmoker.bmi, y = df_female_nonsmoker.charges,\n                hue = df_female_nonsmoker.region,\n                size = df_female_nonsmoker.region,\n                sizes = (75, 250), ax = ax[0,2])\nax[0,2].axvline(x = 30, color = 'gray', label = 'Obese BMI')\nax[0,2].set_title('Female Nonsmoker Insurance Cost vs BMI')\nax[0,2].set_xlabel('BMI')\nax[0,2].set_ylabel('Insurance Costs (USD)')\nax[0,2].legend(bbox_to_anchor = (1.0, 1))\n\n#scatterplot for insurance cost of Female nonsmokers by age\nsns.scatterplot(x = df_female_nonsmoker.age, y = df_female_nonsmoker.charges,\n                hue = df_female_nonsmoker.children,\n                size = df_female_nonsmoker.children, sizes = (125,250),\n                ax = ax[1,0])\nax[1,0].set_title('Female Nonsmoker Insurance Cost vs Age')\nax[1,0].set_xlabel('Age')\nax[1,0].set_ylabel('Insurance Costs (USD)')\n\n#barplot for insurance cost of Female nonsmokers per region\ndf_region = df_female_nonsmoker.groupby('region').mean().reset_index()\nsns.barplot(x = df_region.region,  y = df_region.charges, ax = ax[1,1])\nax[1,1].set_title('Average Female Nonsmoker Insurance Cost Per Region')\nax[1,1].set_xlabel('Region')\nax[1,1].set_ylabel('Insurance Cost (USD)')\n\n#boxplot of Female nonsmoker boxplot\nsns.boxplot(x = df_male_nonsmoker.charges, ax = ax[1,2])\nax[1,2].set_title('Male Nonsmoker Insurance Cost Boxplot')\nax[1,2].set_xlabel('Insurance Cost (USD)')\nplt.savefig('female_nonsmoker_charges_plots.png')\nplt.show()\nplt.clf()\n\n\n\n\n<Figure size 432x288 with 0 Axes>"
  }
]